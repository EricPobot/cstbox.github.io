

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>cron - CSTBox crontab management &mdash; CSTBox 1.0 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="CSTBox 1.0 documentation" href="../index.html"/>
        <link rel="up" title="Core system" href="../core.html"/>
        <link rel="next" title="dbuslib - D-Bus helpers" href="dbuslib.html"/>
        <link rel="prev" title="config - System wide configuration" href="config.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-nav-search">
        

        
          <a href="../index.html" class="icon icon-home"> CSTBox
        

        
        </a>

        
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
        
          
          
              <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../api.html">CSTBox API documentation</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../core.html">Core system</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="cfgbroker.html">cfgbroker - Device network configuration access service</a></li>
<li class="toctree-l3"><a class="reference internal" href="cli.html">cli - Command line interface helpers</a></li>
<li class="toctree-l3"><a class="reference internal" href="config.html">config - System wide configuration</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">cron - CSTBox crontab management</a></li>
<li class="toctree-l3"><a class="reference internal" href="dbuslib.html">dbuslib - D-Bus helpers</a></li>
<li class="toctree-l3"><a class="reference internal" href="devcfg.html">devcfg - Devices network configuration data access tools</a></li>
<li class="toctree-l3"><a class="reference internal" href="events.html">events - Basic definitions and tools related to CSTBox events</a></li>
<li class="toctree-l3"><a class="reference internal" href="evtmgr.html">evtmgr - CSTBox Event manager service</a></li>
<li class="toctree-l3"><a class="reference internal" href="export.html">export - Events data export</a></li>
<li class="toctree-l3"><a class="reference internal" href="flags.html">flags - Notification flags management</a></li>
<li class="toctree-l3"><a class="reference internal" href="hal.html">hal - Hardware Abstraction Layer package</a><ul>
<li class="toctree-l4"><a class="reference internal" href="hal.html#sub-package-content">Sub-package content</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="log.html">log - Customized logging system</a></li>
<li class="toctree-l3"><a class="reference internal" href="service.html">service - Fundation classes for services implementation</a></li>
<li class="toctree-l3"><a class="reference internal" href="statemgr.html">statemgr - State variables management</a><ul>
<li class="toctree-l4"><a class="reference internal" href="statemgr.html#module-pycstbox.statemgr.core">statemgr.core</a></li>
<li class="toctree-l4"><a class="reference internal" href="statemgr.html#module-pycstbox.statemgr.mgr">statemgr.mgr</a></li>
<li class="toctree-l4"><a class="reference internal" href="statemgr.html#module-pycstbox.statemgr.dbus_binding">statemgr.dbus_binding</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="sysutils.html">sysutils - CSTBox system level utilities</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../extensions.html">Extensions</a><ul>
<li class="toctree-l3"><a class="reference internal" href="../extensions.html#devices-support-extensions">Devices support extensions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../extensions.html#protocol-enablers">Protocol enablers</a></li>
<li class="toctree-l4"><a class="reference internal" href="../extensions.html#products-drivers">Products drivers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../extensions.html#optional-services">Optional services</a><ul>
<li class="toctree-l4"><a class="reference internal" href="../extensions/webui.html">webui - CSTBox Web based user interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="../extensions/evtdb.html">evtdb - CSTBox Events Database access D-Bus service</a></li>
<li class="toctree-l4"><a class="reference internal" href="../extensions/mqtt.html">mqtt - MQTT gateway extension</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

          
        
      </div>
      &nbsp;
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">CSTBox</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../api.html">CSTBox API documentation</a> &raquo;</li>
      
          <li><a href="../core.html">Core system</a> &raquo;</li>
      
    <li>cron - CSTBox crontab management</li>
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document">
            
  <div class="section" id="module-pycstbox.cron">
<span id="cron-cstbox-crontab-management"></span><h1>cron - CSTBox crontab management<a class="headerlink" href="#module-pycstbox.cron" title="Permalink to this headline">¶</a></h1>
<p>Lightweight tools for working with the CSTBox private crontab.</p>
<p>In order to avoid cluttering the host system, CSTBox cron settings are gathered
in a package related crontab stored in /etc/cron.d, as described in cron man page.
This way, we can deactivate all CSTBox cron tasks when shutting it down, without
loosing their definitions, and then be able to reactivate them back again when
restarting the framework.</p>
<dl class="class">
<dt id="pycstbox.cron.CronItem">
<em class="property">class </em><code class="descclassname">pycstbox.cron.</code><code class="descname">CronItem</code><span class="sig-paren">(</span><em>line=None</em>, <em>system_crontab=True</em><span class="sig-paren">)</span><a class="headerlink" href="#pycstbox.cron.CronItem" title="Permalink to this definition">¶</a></dt>
<dd><p>An item of the crontab, be it a job specification or anything
else.</p>
<p>Constructor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>line</strong> (<em>str</em>) &#8211; (optional) a line to be parsed. If not provided, all fields are
initialized to an empty value. It item belongs to a system crontab,
the user field is defaulted to the current user id</li>
<li><strong>system_crontab</strong> (<em>bool</em>) &#8211; if True (default), cron items use the system crontab format,
including the user field. If false, no user field is included
in the cron items.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="pycstbox.cron.CronItem.parse">
<code class="descname">parse</code><span class="sig-paren">(</span><em>line</em><span class="sig-paren">)</span><a class="headerlink" href="#pycstbox.cron.CronItem.parse" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses a string supposed to be a crontab line.</p>
<p>A basic analyze of the line is performed to decide if it can be a job
specification or something else. It is quite rudimentary and not bullet
proof in any way, since a comment line containing a number of words
equal to the job definition field count is taken for a job.</p>
<p>Maybe some more in-depth analyze could be done by checking if what is
supposed to be the time specs fields are valid ones, but we don&#8217;t need
so much sophistication for the moment.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>line</strong> (<em>str</em>) &#8211; the line to be parsed</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pycstbox.cron.CronItem.render">
<code class="descname">render</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycstbox.cron.CronItem.render" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the crontab record corresponding to the item definition.</p>
<p>The result is always a string, which can be empty if no attribute of
the item is set.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="pycstbox.cron.CronTab">
<em class="property">class </em><code class="descclassname">pycstbox.cron.</code><code class="descname">CronTab</code><span class="sig-paren">(</span><em>path='/etc/cstbox/crontab'</em>, <em>system_crontab=True</em><span class="sig-paren">)</span><a class="headerlink" href="#pycstbox.cron.CronTab" title="Permalink to this definition">¶</a></dt>
<dd><p>The crontab.</p>
<p>Despite its declaration the class does not inherit from CronTabHooks with the usual semantics.
This must be seen here as a mixin mechanism, allowing to easily override the hooks by providing
an ad-hoc version of <code class="xref py py-class docutils literal"><span class="pre">CronTabHooks</span></code>. This is the reason why <cite>object</cite> has been left in
the super-classes list, although not required from Python language strict point of view.</p>
<p>Constructor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>path</strong> (<em>str</em>) &#8211; an optional path from which the crontab is loaded, if it exists.
default: CSTBox crontab path</li>
<li><strong>system_crontab</strong> (<em>bool</em>) &#8211; if True (default), cron items use the system crontab format,
including the user field. If false, no user field is included
in the cron items.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="pycstbox.cron.CronTab.read">
<code class="descname">read</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="headerlink" href="#pycstbox.cron.CronTab.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Loads and parses the content of a crontab file.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<em>str</em>) &#8211; the path of the file</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body">any IO error dealing with file access, including file not found</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pycstbox.cron.CronTab.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>path=None</em><span class="sig-paren">)</span><a class="headerlink" href="#pycstbox.cron.CronTab.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the crontab to disk.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<em>str</em>) &#8211; the path of the file to be written. If not provided, the path
defined at instantiation time is used. If none of these are
defined, an exception is generated.
If not provided at creation time, the path passed here will be
stored in the instance.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pycstbox.cron.CronTab.add">
<code class="descname">add</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="headerlink" href="#pycstbox.cron.CronTab.add" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds an item to the crontab.</p>
<p>Passing None is allowed and will add an empty CronItem.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>item</strong> (<a class="reference internal" href="#pycstbox.cron.CronItem" title="pycstbox.cron.CronItem"><em>CronItem</em></a>) &#8211; the item to be added</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body">ValueError if the passed item is not None and is not of same type
(system or user) as the crontab itself</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="pycstbox.cron.CronTab.remove">
<code class="descname">remove</code><span class="sig-paren">(</span><em>item</em><span class="sig-paren">)</span><a class="headerlink" href="#pycstbox.cron.CronTab.remove" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes a given item from the crontab.</p>
</dd></dl>

<dl class="method">
<dt id="pycstbox.cron.CronTab.iterjobs">
<code class="descname">iterjobs</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycstbox.cron.CronTab.iterjobs" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns an iterator on the cron items representing jobs.</p>
</dd></dl>

<dl class="method">
<dt id="pycstbox.cron.CronTab.find_comment">
<code class="descname">find_comment</code><span class="sig-paren">(</span><em>comment</em><span class="sig-paren">)</span><a class="headerlink" href="#pycstbox.cron.CronTab.find_comment" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of cron items having a specific comment.</p>
</dd></dl>

<dl class="method">
<dt id="pycstbox.cron.CronTab.find_command">
<code class="descname">find_command</code><span class="sig-paren">(</span><em>command</em><span class="sig-paren">)</span><a class="headerlink" href="#pycstbox.cron.CronTab.find_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Return a list of cron items using a command.</p>
</dd></dl>

<dl class="method">
<dt id="pycstbox.cron.CronTab.render">
<code class="descname">render</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#pycstbox.cron.CronTab.render" title="Permalink to this definition">¶</a></dt>
<dd><p>Renders the whole crontab as a list of strings.</p>
</dd></dl>

</dd></dl>

</div>


          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="dbuslib.html" class="btn btn-neutral float-right" title="dbuslib - D-Bus helpers" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="config.html" class="btn btn-neutral" title="config - System wide configuration" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'1.0',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>